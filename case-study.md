# Case-study оптимизации

## Актуальная проблема
Необходимо обработать файл с данными, больше ста двадцати мегабайт.

На старте уже была программа на `ruby`, которая умела делать нужную обработку.

Она успешно работала на файлах размером пару мегабайт, но для большого файла она работала бесконечно долго.

Было решено исправить эту проблему, оптимизировав эту программу.

## Формирование метрики
Для того, чтобы понимать, дают ли изменения программы положительный эффект на быстродействие программы принято решение использовать такую метрику: *время выполнения программы*

## Гарантия корректности работы оптимизированной программы
Программа поставлялась с тестом. Выполнение этого теста в фидбек-лупе позволяет не допустить изменения логики программы при оптимизации.

## Feedback-Loop
Для того, чтобы иметь возможность быстро проверять гипотезы поставлена задача выстроить эффективный `feedback-loop`, который позволит получать обратную связь по эффективности сделанных изменений за *финальное время после оптимизации*

Для построения фидбек-лупа возьмём объём данных в размере 1000 срок
Оценка ассимтотики
size       1X      2X      3X      4X      5X  (1000 строк) 
time      0.35    1.07    2.01    3.24    4.81 (секунд)
delta     0.35    0.72    0.94    1.23    1.57 (секунд/1000строк)
accel      1      1.06    0.63    0.82    0.97 (доля=секунд/1000строк^2)

mean(delta) ~ 96% 
mean(acceleration) ~ 90% 

Оценка продолжиельности обработки полного объёма данных для исходной версии программы
3250940 / 1000 * mean(delta) ~ 52 минуты

Вот как я построил `feedback_loop`: *как вы построили feedback_loop*

## Вникаем в детали системы, чтобы найти главные точки роста
Для того, чтобы найти "точки роста" для оптимизации воспользуемся *инструментами, которыми  воспользовались*

Вот какие проблемы удалось найти и решить

### Ваша находка №1
- какой отчёт показал главную точку роста
- как вы решили её оптимизировать
- как изменилась метрика
- как изменился отчёт профилировщика - исправленная проблема перестала быть главной точкой роста?

### Ваша находка №2
- какой отчёт показал главную точку роста
- как вы решили её оптимизировать
- как изменилась метрика
- как изменился отчёт профилировщика - исправленная проблема перестала быть главной точкой роста?

### Ваша находка №X
- какой отчёт показал главную точку роста
- как вы решили её оптимизировать
- как изменилась метрика
- как изменился отчёт профилировщика - исправленная проблема перестала быть главной точкой роста?

## Результаты
В результате проделанной оптимизации наконец удалось обработать файл с данными.
Удалось улучшить метрику системы с *того, что у вас было в начале, до того, что получилось в конце* и уложиться в заданный бюджет.

*Какими ещё результами можно поделиться*

## Защита от регрессии производительности
Для защиты от потери достигнутого прогресса при дальнейших изменениях программы *о performance-тестах, которые были дописаны*

